{% extends "base.html" %}

{% block title %}Admin Dashboard - SmartQuiz{% endblock %}

{% block extra_style %}
<style>
    .stats-grid { display:flex; gap:20px; margin-bottom:40px; flex-wrap:wrap; }
    .stat-card { flex:1; background:white; padding:25px; border-radius:10px; text-align:center; box-shadow:0 2px 8px rgba(0,0,0,0.1); transition:0.3s; }
    .stat-card:hover { transform:translateY(-4px); box-shadow:0 8px 16px rgba(0,0,0,0.2); }
    .stat-card h3 { font-size:24px; color:#007bff; margin:10px 0; }
    .stat-card p { font-size:16px; color:#666; margin:0; }
    .actions-grid { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:40px; }
    .action-card { flex:1; min-width:220px; background:white; border-radius:12px; padding:20px; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.1); text-decoration:none; color:#333; font-weight:500; transition:0.3s; }
    .action-card:hover { transform:translateY(-4px); box-shadow:0 8px 16px rgba(0,0,0,0.2); }
    table { border-collapse: collapse; width:100%; background:white; margin-bottom:40px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    th, td { border:1px solid #ddd; padding:10px; text-align:center; }
    th { background:#007bff; color:white; }
    tr:nth-child(even) { background:#f9f9f9; }
    .btn-edit { padding:6px 12px; background:#3b82f6; color:white; border-radius:6px; text-decoration:none; margin-right:5px; font-weight:600; }
    .btn-edit:hover { background:#2563eb; }
    .btn-delete { padding:6px 12px; background:#dc3545; color:white; border-radius:6px; text-decoration:none; font-weight:600; }
    .btn-delete:hover { background:#b02a37; }
    @media(max-width:768px){ .stats-grid,.actions-grid{flex-direction:column;} }
</style>
<script>
    // This script explicitly prevents the browser from loading the page from BFCache (Back/Forward Cache).
    // It forces a full page reload when navigating history, which ensures the server-side 
    // session check (in Flask) always runs, forcing a redirect to login if the session is gone.
    window.addEventListener('pageshow', function (event) {
        if (event.persisted) {
            window.location.reload();
        }
    });
</script>
{% endblock %}

{% block content %}
<div class="container">
    <h1>Admin Dashboard</h1>

    <div class="stats-grid">
        <div class="stat-card">
            <h3>{{ students }}</h3>
            <p>Total Students</p>
        </div>
        <div class="stat-card">
            <h3>{{ lecturers }}</h3>
            <p>Total Lecturers</p>
        </div>
        <div class="stat-card">
            <h3>{{ quizzes }}</h3>
            <p>Total Quizzes</p>
        </div>
        <div class="stat-card">
            <h3>{{ results }}</h3>
            <p>Quizzes Completed</p>
        </div>
    </div>

    <h2 class="section-title">Quick Actions</h2>
    <div class="actions-grid">
        <a href="{{ url_for('admin_users') }}" class="action-card">
            <div class="action-title">Manage Users</div>
            <div class="action-description">Edit or delete students & lecturers</div>
        </a>
        <a href="{{ url_for('admin_courses') }}" class="action-card">
            <div class="action-title">Manage Courses</div>
            <div class="action-description">Create and update courses</div>
        </a>
        <a href="{{ url_for('admin_notifications') }}" class="action-card">
            <div class="action-title">Notifications</div>
            <div class="action-description">Create and manage announcements</div>
        </a>
        
        <a href="{{ url_for('admin_reports') }}" class="action-card">
            <div class="action-title">Reports</div>
            <div class="action-description">View quiz results & analytics</div>
        </a>
        <a href="{{ url_for('analytics') }}" class="action-card">
            <div class="action-title">Analytics</div>
            <div class="action-description">View system-wide Analytics</div>
        </a>
    </div>

    

    
</div>
{% endblock %}
